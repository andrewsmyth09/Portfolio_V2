---
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const latestPosts = posts
  .sort((a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime())
  .slice(0, 3);
---

<section class="py-20">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl md:text-4xl font-bold text-center">Latest Blog Posts</h2>

    <div class="grid gap-8 md:grid-cols-3 mt-10">
      {latestPosts.map((post) => (
        <a
          href={`/blog/${post.slug}`}
          class="block bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-lg transition"
        >
          <h3 class="text-xl font-semibold text-gray-900">{post.data.title}</h3>
          <p class="mt-3 text-gray-600 line-clamp-3">{post.data.snippet}</p>
          <small class="block mt-4 text-sm text-gray-400">
            {new Date(post.data.publishDate).toLocaleDateString()}
          </small>
        </a>
      ))}
    </div>

    <!-- View All Posts Button -->
    <div class="mt-12 text-center">
      <a
        href="/blog"
        class="inline-block bg-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition"
      >
        View All Posts
      </a>
    </div>
  </div>
</section>
